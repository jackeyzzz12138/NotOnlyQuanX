# Shadowrocket Configuration File
# Generated from surge_mac.conf and corrected based on lazy-group.conf

[General]
# bypass-system = true
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,*.ccb.com,*.abchina.com.cn,*.psbc.com,www.baidu.com
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32
dns-server =  https://1.12.12.12/dns-query, https://120.53.53.53/dns-query, quic://223.5.5.5:853, quic://223.6.6.6:853
fallback-dns-server = 119.29.29.29, 223.5.5.5, system
ipv6 = false
private-ip-answer = true
dns-direct-fallback-proxy = true
hijack-dns = 8.8.8.8:53,8.8.4.4:53
udp-policy-not-supported-behaviour = REJECT
loglevel = notify
always-real-ip = link-ip.nextdns.io, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
#TUN
compatibility-mode=3 
update-url= https://raw.githubusercontent.com/jackeyzzz12138/NotOnlyQuanX/main/Profile/shadowrocket.conf

[Proxy]
# ËØ∑Âú®Ê≠§Â§ÑÊ∑ªÂä†ÊÇ®ÁöÑ‰ª£ÁêÜËäÇÁÇπ
# ÊàñËÄÖÈÄöËøáËÆ¢ÈòÖÈìæÊé•Ê∑ªÂä†

[Proxy Group]
# ËØ¥ÊòéÔºö
# 1. ÊÇ®ÂøÖÈ°ªÂú® App ‰∏≠Ê∑ªÂä†‰∏§‰∏™ËÆ¢ÈòÖÔºåÂπ∂Â∞ÜÂÖ∂„ÄåÂà´Âêç„ÄçÂàÜÂà´ËÆæÁΩÆ‰∏∫ "‰∏ªÂäõÊú∫Âú∫" Âíå "Â§áÁî®Êú∫Âú∫"„ÄÇ
# 2. Â∏¶ "ËäÇÁÇπ" ÂêéÁºÄÁöÑ url-test ÂàÜÁªÑ‰ºöËá™Âä®Á≠õÈÄâÂØπÂ∫îÊú∫Âú∫ÂíåÂå∫ÂüüÁöÑËäÇÁÇπ„ÄÇ
# 3. ‰∏çÂ∏¶ "ËäÇÁÇπ" ÂêéÁºÄÁöÑ select ÂàÜÁªÑËÆ©ÊÇ®ÂèØ‰ª•ÊâãÂä®ÈÄâÊã©‰ΩøÁî®‰∏ªÂäõËøòÊòØÂ§áÁî®Á∫øË∑Ø„ÄÇ

# --- ‰∏öÂä°Á≠ñÁï•ÁªÑ ---
üçé Apple = select, DIRECT, üá≠üá∞ Hong Kong, üá∫üá∏ United States, üåç Proxy
üï∏ Speedtest = select, DIRECT, üåç Proxy
Emby = select, DIRECT, üá≠üá∞ Hong Kong, üá®üá≥ Taiwan, üáØüáµ Japan, üá∏üá¨ Singapore, üá∫üá∏ United States, üá™üá∫ Europe, üá∞üá∑ Korea, üåç Proxy, ‰ΩéÂÄçÁéáËäÇÁÇπ
‚úàÔ∏è Telegram = select, üåç Proxy, üá∏üá¨ Singapore, üá∫üá∏ United States, üá≠üá∞ Hong Kong, üá®üá≥ Taiwan, üáØüáµ Japan
ü§ñ AI = select, üá∫üá∏ United States, üáØüáµ Japan, üá∏üá¨ Singapore, üåç Proxy
‚ô£Ô∏è Microsoft = select, DIRECT, üá≠üá∞ Hong Kong, üá∏üá¨ Singapore, üá∫üá∏ United States, üåç Proxy
‚òÅÔ∏è OneDrive = select, DIRECT, üá≠üá∞ Hong Kong, üá∏üá¨ Singapore, üá∫üá∏ United States, üåç Proxy
‚è¨ Download = select, DIRECT, üåç Proxy
üì∫ Stream = select, üá≠üá∞ Hong Kong, üá∏üá¨ Singapore, üá∫üá∏ United States, üáØüáµ Japan, üá∞üá∑ Korea, üá™üá∫ Europe, üåç Proxy
üéÆ Steam = select, DIRECT, üá≠üá∞ Hong Kong, üá∏üá¨ Singapore, üá∫üá∏ United States, üáØüáµ Japan, üá∞üá∑ Korea, üá™üá∫ Europe, üåç Proxy
üõú CDN = select, DIRECT, üá≠üá∞ Hong Kong, üá®üá≥ Taiwan, üáØüáµ Japan, üá∏üá¨ Singapore, üá∫üá∏ United States, üá™üá∫ Europe, üá∞üá∑ Korea, üåç Proxy
üåç Proxy = select, üá≠üá∞ Hong Kong, üá®üá≥ Taiwan, üá∏üá¨ Singapore, üáØüáµ Japan, üá∫üá∏ United States, üá™üá∫ Europe, üá∞üá∑ Korea, PROXY

# --- Âå∫ÂüüÈÄâÊã©ÁªÑ (ÊâãÂä®ÈÄâÊã©‰∏ªÂäõ/Â§áÁî®) ---
üá≠üá∞ Hong Kong = select, ‰∏ªÂäõÈ¶ôÊ∏ØËäÇÁÇπ, Â§áÁî®È¶ôÊ∏ØËäÇÁÇπ
üá®üá≥ Taiwan = select, ‰∏ªÂäõÂè∞ÊπæËäÇÁÇπ, Â§áÁî®Âè∞ÊπæËäÇÁÇπ
üáØüáµ Japan = select, ‰∏ªÂäõÊó•Êú¨ËäÇÁÇπ, Â§áÁî®Êó•Êú¨ËäÇÁÇπ
üá∏üá¨ Singapore = select, ‰∏ªÂäõÊñ∞Âä†Âù°ËäÇÁÇπ, Â§áÁî®Êñ∞Âä†Âù°ËäÇÁÇπ
üá∫üá∏ United States = select, ‰∏ªÂäõÁæéÂõΩËäÇÁÇπ, Â§áÁî®ÁæéÂõΩËäÇÁÇπ
üá∞üá∑ Korea = select, ‰∏ªÂäõÈü©ÂõΩËäÇÁÇπ, Â§áÁî®Èü©ÂõΩËäÇÁÇπ
üá™üá∫ Europe = select, ‰∏ªÂäõÊ¨ßÊ¥≤ËäÇÁÇπ, Â§áÁî®Ê¨ßÊ¥≤ËäÇÁÇπ

# --- ËäÇÁÇπÁ≠õÈÄâ (Ëá™Âä®ÊµãÈÄü)
# ‰∏ªÂäõÊú∫Âú∫
‰∏ªÂäõÈ¶ôÊ∏ØËäÇÁÇπ = url-test, use=‰∏ªÂäõÊú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)HK|Hong|hong|È¶ôÊ∏Ø|Ê∑±Ê∏Ø|Ê≤™Ê∏Ø|‰∫¨Ê∏Ø|Ê∏Ø
‰∏ªÂäõÂè∞ÊπæËäÇÁÇπ = url-test, use=‰∏ªÂäõÊú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)TW|Taiwan|taiwan|Âè∞Êπæ|Âè∞Âåó|Âè∞‰∏≠|Êñ∞Âåó|ÂΩ∞Âåñ
‰∏ªÂäõÊó•Êú¨ËäÇÁÇπ = url-test, use=‰∏ªÂäõÊú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)JP|Japan|japan|Tokyo|tokyo|Êó•Êú¨|‰∏ú‰∫¨|Â§ßÈò™|‰∫¨Êó•|ËãèÊó•|Ê≤™Êó•|‰∏äÊó•|Â∑ùÊó•|Ê∑±Êó•|ÂπøÊó•
‰∏ªÂäõÊñ∞Âä†Âù°ËäÇÁÇπ = url-test, use=‰∏ªÂäõÊú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)SG|Sing|sing|Êñ∞Âä†Âù°|ÁãÆÂüé|Ê≤™Êñ∞|‰∫¨Êñ∞|Ê∑±Êñ∞|Êù≠Êñ∞|ÂπøÊñ∞
‰∏ªÂäõÁæéÂõΩËäÇÁÇπ = url-test, use=‰∏ªÂäõÊú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)US|USA|America|america|United States|ÁæéÂõΩ|Âá§Âá∞Âüé|Ê¥õÊùâÁü∂|Ë•øÈõÖÂõæ|ËäùÂä†Âì•|Á∫ΩÁ∫¶|Ê≤™Áæé|Áæé
‰∏ªÂäõÈü©ÂõΩËäÇÁÇπ = url-test, use=‰∏ªÂäõÊú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)KR|Korea|korea|KOR|Èü©ÂõΩ|È¶ñÂ∞î|Èü©|Èüì|Êò•Â∑ù
‰∏ªÂäõÊ¨ßÊ¥≤ËäÇÁÇπ = url-test, use=‰∏ªÂäõÊú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)üá¨üáß|üá´üá∑|üá≥üá±|üáÆüá∏|üá©üá™|üá∫üá¶|üá®üá≠|üá™üá∫

# Â§áÁî®Êú∫Âú∫
Â§áÁî®È¶ôÊ∏ØËäÇÁÇπ = url-test, use=Â§áÁî®Êú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)HK|Hong|hong|È¶ôÊ∏Ø|Ê∑±Ê∏Ø|Ê≤™Ê∏Ø|‰∫¨Ê∏Ø|Ê∏Ø
Â§áÁî®Âè∞ÊπæËäÇÁÇπ = url-test, use=Â§áÁî®Êú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)TW|Taiwan|taiwan|Âè∞Êπæ|Âè∞Âåó|Âè∞‰∏≠|Êñ∞Âåó|ÂΩ∞Âåñ
Â§áÁî®Êó•Êú¨ËäÇÁÇπ = url-test, use=Â§áÁî®Êú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)JP|Japan|japan|Tokyo|tokyo|Êó•Êú¨|‰∏ú‰∫¨|Â§ßÈò™|‰∫¨Êó•|ËãèÊó•|Ê≤™Êó•|‰∏äÊó•|Â∑ùÊó•|Ê∑±Êó•|ÂπøÊó•
Â§áÁî®Êñ∞Âä†Âù°ËäÇÁÇπ = url-test, use=Â§áÁî®Êú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)SG|Sing|sing|Êñ∞Âä†Âù°|ÁãÆÂüé|Ê≤™Êñ∞|‰∫¨Êñ∞|Ê∑±Êñ∞|Êù≠Êñ∞|ÂπøÊñ∞
Â§áÁî®ÁæéÂõΩËäÇÁÇπ = url-test, use=Â§áÁî®Êú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)US|USA|America|america|United States|ÁæéÂõΩ|Âá§Âá∞Âüé|Ê¥õÊùâÁü∂|Ë•øÈõÖÂõæ|ËäùÂä†Âì•|Á∫ΩÁ∫¶|Ê≤™Áæé|Áæé
Â§áÁî®Èü©ÂõΩËäÇÁÇπ = url-test, use=Â§áÁî®Êú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)KR|Korea|korea|KOR|Èü©ÂõΩ|È¶ñÂ∞î|Èü©|Èüì|Êò•Â∑ù
Â§áÁî®Ê¨ßÊ¥≤ËäÇÁÇπ = url-test, use=Â§áÁî®Êú∫Âú∫, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=(?i)üá¨üáß|üá´üá∑|üá≥üá±|üáÆüá∏|üá©üá™|üá∫üá¶|üá®üá≠|üá™üá∫
‰ΩéÂÄçÁéáËäÇÁÇπ = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=0, timeout=5, policy-regex-filter=\b(0(?:\.\d+)?|1(?:\.0+)?)(?:\s*[xXÂÄç])?\b

[Rule]
# > Adblock
RULE-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject.conf,REJECT

# > Streaming
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream.conf,üì∫ Stream
RULE-SET,https://ruleset.skk.moe/List/ip/stream.conf,üì∫ Stream
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_us.conf,üá∫üá∏ United States
RULE-SET,https://ruleset.skk.moe/List/ip/stream_us.conf,üá∫üá∏ United States
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_hk.conf,üá≠üá∞ Hong Kong
RULE-SET,https://ruleset.skk.moe/List/ip/stream_hk.conf,üá≠üá∞ Hong Kong
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_jp.conf,üáØüáµ Japan
RULE-SET,https://ruleset.skk.moe/List/ip/stream_jp.conf,üáØüáµ Japan
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_kr.conf,üá∞üá∑ Korea
RULE-SET,https://ruleset.skk.moe/List/ip/stream_kr.conf,üá∞üá∑ Korea
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_tw.conf,üá®üá≥ Taiwan
RULE-SET,https://ruleset.skk.moe/List/ip/stream_tw.conf,üá®üá≥ Taiwan
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_eu.conf,üá™üá∫ Europe
RULE-SET,https://ruleset.skk.moe/List/ip/stream_eu.conf,üá™üá∫ Europe

# > Services
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_services.conf,üçé Apple
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cn.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/domainset/apple_cdn.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft.conf,‚ô£Ô∏è Microsoft
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft_cdn.conf,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OneDrive/OneDrive.list,‚òÅÔ∏è OneDrive
RULE-SET,https://ruleset.skk.moe/List/non_ip/ai.conf,ü§ñ AI
RULE-SET,https://ruleset.skk.moe/List/ip/telegram.conf,‚úàÔ∏è Telegram
RULE-SET,https://raw.githubusercontent.com/Repcz/Tool/X/Surge/Rules/Emby.list,Emby
DOMAIN-SUFFIX,steamcommunity.com,üéÆ Steam

# > Others
RULE-SET,https://ruleset.skk.moe/List/domainset/speedtest.conf,üï∏ Speedtest
RULE-SET,https://ruleset.skk.moe/List/domainset/download.conf,‚è¨ Download
RULE-SET,https://ruleset.skk.moe/List/non_ip/download.conf,‚è¨ Download
RULE-SET,https://ruleset.skk.moe/List/domainset/cdn.conf,üõú CDN
RULE-SET,https://ruleset.skk.moe/List/non_ip/cdn.conf,üõú CDN

# > Domestic
RULE-SET,https://ruleset.skk.moe/List/non_ip/domestic.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/ip/domestic.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/ip/china_ip.conf,DIRECT
GEOIP,CN,DIRECT

# > Final
FINAL,üåç Proxy

[Host]
localhost = 127.0.0.1
*.apple.com = server:system
*.icloud.com = server:system

[URL Rewrite]
^https?://(www.)?(g|google)\.cn https://www.google.com 302
^https?://(ditu|maps).google\.cn https://maps.google.com 302
^https?://api.abema.io/v\d/ip/check - reject

[MITM]
h2 = true
hostname = *.google.cn, api.abema.io, *.zhihu.com, sub.store
