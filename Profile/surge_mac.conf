# 这个配置也是从网上其他抄过来进行改编的，比较适合多个机场的用户，如果作者你看到这个配置了，欢迎与我联系。
# 还有部分设置推荐用户使用sukka的模块进行修改。

[General]
vif-mode = auto
# --- GENERAL ---
# Enhanced Wi-Fi Assist
wifi-assist = true
# Hybrid Network
all-hybrid = false
# Gaming Optimization
udp-priority = false
# Latency Benchmark
internet-test-url = http://wifi.vivo.com.cn/generate_204
proxy-test-url = http://latency-test.skk.moe/endpoint
proxy-test-udp = www.apple.com@64.6.64.6
test-timeout = 5
# GeoIP Database
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
ipv6 = false
# --- Wi-Fi ACCESS ---
allow-wifi-access = false
# Surge iOS - 默认 HTTP 端口号：6152，SOCKS5 端口号：6153
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# Surge Mac - 默认 HTTP 端口号：6152，SOCKS5 端口号：6153
http-listen = 0.0.0.0
socks5-listen = 0.0.0.0
# 允许热点共享
allow-hotspot-access = true


# --- COMPATIBILITY ---
compatibility-mode = 0
# 跳过代理
skip-proxy = localhost, *.local, injections.adguard.org, local.adguard.org, captive.apple.com, guzzoni.apple.com, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32
exclude-simple-hostnames = true
# --- DNS ---
# The IP addresses of upstream DNS servers
read-etc-hosts = true
# use-local-host-item-for-proxy = true
# encrypted-dns-follow-outbound-mode = false
include-all-networks = false
# --- ROUTING ---
include-local-networks = false
loglevel = notify
# --- ADVANCED ---
show-error-page-for-reject = true
always-real-ip = link-ip.nextdns.io, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
force-http-engine-hosts = *.ott.cibntv.net, 123.59.31.1,119.18.193.135, 122.14.246.33, 175.102.178.52, 116.253.24.*, 175.6.26.*, 220.169.153.*
use-default-policy-if-wifi-not-primary = false
udp-policy-not-supported-behaviour = REJECT
ipv6-vif = off
encrypted-dns-server = quic://223.5.5.5, quic://223.6.6.6, https://1.12.12.12/dns-query, https://120.53.53.53/dns-query
use-local-host-item-for-proxy = false
dns-server = 119.29.29.29, 223.5.5.5, system

[Proxy]
# 如果你有自建填在这里

[Proxy Group]

🍎 Apple = select, DIRECT, 🇭🇰 Hong Kong, 🇺🇸 United States
🕸 Speedtest = select, DIRECT, 🌍 Proxy
Emby = select, DIRECT, 🇭🇰 Hong Kong, 🇨🇳 Taiwan, 🇯🇵 Japan, 🇸🇬 Singapore, 🇺🇸 United States, 🇪🇺 Europe, 🇰🇷 Korea, 🌍 Proxy, 🚀 备用机场, 低倍率节点
✈️ Telegram = select, 🌍 Proxy, 🇸🇬 Singapore, 🇺🇸 United States, 🇭🇰 Hong Kong, 🇨🇳 Taiwan, 🇯🇵 Japan, AZ-JP
🤖 AI = select, 🇺🇸 United States, 🇯🇵 Japan, 🇸🇬 Singapore, 🌍 Proxy, AZ-JP
♣️ Microsoft = select, DIRECT, 🇭🇰 Hong Kong, 🇸🇬 Singapore, 🇺🇸 United States, 🌍 Proxy
☁️ OneDrive = select, DIRECT, 🇭🇰 Hong Kong, 🇸🇬 Singapore, 🇺🇸 United States, 🌍 Proxy
⏬ Download = select, DIRECT, 🌍 Proxy, 低倍率节点
📺 Stream = select, DIRECT, 🇭🇰 Hong Kong, 🇸🇬 Singapore, 🇺🇸 United States, 🇯🇵 Japan, 🇰🇷 Korea, 🇪🇺 Europe, 🌍 Proxy
🎮 Steam = select, DIRECT, 🇭🇰 Hong Kong, 🇸🇬 Singapore, 🇺🇸 United States, 🇯🇵 Japan, 🇰🇷 Korea, 🇪🇺 Europe, 🌍 Proxy
🛜 CDN = select, 🇭🇰 Hong Kong, 🇨🇳 Taiwan, 🇯🇵 Japan, 🇸🇬 Singapore, 🇺🇸 United States, 🇪🇺 Europe, 🇰🇷 Korea, 🌍 Proxy, 低倍率节点, DIRECT
🇭🇰 Hong Kong = select, 主力香港节点, 备用香港节点, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
🇨🇳 Taiwan = select, 主力台湾节点, 备用台湾节点, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
🇯🇵 Japan = select, 主力日本节点, 备用日本节点, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
🇸🇬 Singapore = select, 主力新加坡节点, 备用新加坡节点, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
🇺🇸 United States = select, 主力美国节点, 备用美国节点, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
🇪🇺 Europe = select, 主力欧洲节点, 备用欧洲节点, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
🇰🇷 Korea = select, 主力韩国节点, 备用韩国节点, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
🌍 Proxy = select, 🇭🇰 Hong Kong, 🇨🇳 Taiwan, 🇸🇬 Singapore, 🇯🇵 Japan, 🇺🇸 United States, 🇪🇺 Europe, ✈️ 主力机场, 🚀 备用机场, AZ-JP, 低倍率节点
# 填入订阅链接
✈️ 主力机场 = select, policy-path=, update-interval=7200
🚀 备用机场 = select, policy-path=, update-interval=7200

主力香港节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=✈️ 主力机场, policy-regex-filter=(🇭🇰)|(香港)|(Hong)|(HK)
主力美国节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=✈️ 主力机场, policy-regex-filter=(🇺🇸)|(美国)|(States)|(US)
主力日本节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=✈️ 主力机场, policy-regex-filter=(🇯🇵)|(日本)|(Japan)|(JP)
主力台湾节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=✈️ 主力机场, policy-regex-filter=(🇨🇳)|(台湾)|(Tai)|(TW)
主力韩国节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=✈️ 主力机场, policy-regex-filter=(🇰🇷)|(韩国)|(Korea)|(KR)
主力新加坡节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=✈️ 主力机场, policy-regex-filter=(🇸🇬)|(新加坡)|(Singapore)|(SG)
主力欧洲节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=✈️ 主力机场, policy-regex-filter=(🇬🇧)|(🇫🇷)|(🇳🇱)|(🇮🇸)|(🇩🇪)|(🇺🇦)|(🇨🇭)|(🇪🇺)
备用香港节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=🚀 备用机场, policy-regex-filter=(🇭🇰)|(香港)|(Hong)|(HK)
备用美国节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=🚀 备用机场, policy-regex-filter=(🇺🇸)|(美国)|(States)|(US)
备用日本节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=🚀 备用机场, policy-regex-filter=(🇯🇵)|(日本)|(Japan)|(JP)
备用台湾节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=🚀 备用机场, policy-regex-filter=(🇨🇳)|(台湾)|(Tai)|(TW)
备用韩国节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=🚀 备用机场, policy-regex-filter=(🇰🇷)|(韩国)|(Korea)|(KR)
备用新加坡节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=🚀 备用机场, policy-regex-filter=(🇸🇬)|(新加坡)|(Singapore)|(SG)
备用欧洲节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=🚀 备用机场, policy-regex-filter=(🇬🇧)|(🇫🇷)|(🇳🇱)|(🇮🇸)|(🇩🇪)|(🇺🇦)|(🇨🇭)|(🇪🇺)
低倍率节点 = smart, no-alert=0, hidden=1, include-all-proxies=0, include-other-group="✈️ 主力机场,🚀 备用机场", policy-regex-filter=\b(0(?:\.\d+)?|1(?:\.0+)?)(?:\s*[xX倍])?\b

[Rule]
#Dia
DOMAIN-SUFFIX,launchdarkly.com,🤖 AI
DOMAIN-SUFFIX,diabrowser.engineering,🤖 AI

DOMAIN,javdb.com,🇭🇰 Hong Kong
DOMAIN,update.googleapis.com,REJECT

DOMAIN,desktop.parallels.com,REJECT,extended-matching
# > KEYWORD
# > SUFFIX
# > DOMAIN

# > Safari 防跳转
# DOMAIN,app-site-association.cdn-apple.com,REJECT
# > ban UDP on Youtube
# AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP

# > > Mail
DOMAIN-SUFFIX,smtp,DIRECT
URL-REGEX,(Subject|HELO|SMTP),DIRECT

# > ADBLOCK
# Non IP
# 基础的 12 万拦截域名
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT,extended-matching
# 额外 20 万拦截域名，作为基础的补充，启用时需要搭配基础一起使用
# 在 Surge 5 for Mac（或更新版本），即使同时启用基础和额外的拦截域名也不会导致匹配性能下降或内存占用过高
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject_extra.conf,REJECT,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject.conf,REJECT,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-no-drop.conf,REJECT-NO-DROP,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-drop.conf,REJECT-DROP,extended-matching
# > 测速
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/speedtest.conf,🕸 Speedtest,extended-matching



# > Spotify
# RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list,🎧 Spotify
# > EMBY
RULE-SET,https://raw.githubusercontent.com/Repcz/Tool/X/Surge/Rules/Emby.list,Emby
# > 流媒体
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_us.conf,🇺🇸 United States
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_eu.conf,🇪🇺 Europe
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_jp.conf,🇯🇵 Japan
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_kr.conf,🇰🇷 Korea
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_hk.conf,🇭🇰 Hong Kong
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_tw.conf,🇨🇳 Taiwan
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream.conf,📺 Stream

# > AI
RULE-SET,https://ruleset.skk.moe/List/non_ip/ai.conf,🤖 AI

# > Apple
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/apple_cdn.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_services.conf,🍎 Apple
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cn.conf,DIRECT

# > OneDrive
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OneDrive/OneDrive.list,☁️ OneDrive

# > Microsoft
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft_cdn.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft.conf,♣️ Microsoft

# > 静态CDN
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/cdn.conf,🛜 CDN,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/cdn.conf,🛜 CDN,extended-matching
# > Download
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/download.conf,⏬ Download
RULE-SET,https://ruleset.skk.moe/List/non_ip/download.conf,⏬ Download

# > Steam
DOMAIN-SUFFIX,steamcomunity.com,🎮 Steam

# > LAN
# Non IP
RULE-SET,https://ruleset.skk.moe/List/non_ip/lan.conf,DIRECT

# > MISC
RULE-SET,https://ruleset.skk.moe/List/non_ip/domestic.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/direct.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/global.conf,🌍 Proxy



# ------------------------以下全为IP类规则-----------------------------------
# > ADBLOCK
# IP
RULE-SET,https://ruleset.skk.moe/List/ip/reject.conf,REJECT-DROP

# > 流媒体
# IP
RULE-SET,https://ruleset.skk.moe/List/ip/stream_us.conf,🇺🇸 United States
RULE-SET,https://ruleset.skk.moe/List/ip/stream_eu.conf,🇪🇺 Europe
RULE-SET,https://ruleset.skk.moe/List/ip/stream_jp.conf,🇯🇵 Japan
RULE-SET,https://ruleset.skk.moe/List/ip/stream_kr.conf,🇰🇷 Korea
RULE-SET,https://ruleset.skk.moe/List/ip/stream_hk.conf,🇭🇰 Hong Kong
RULE-SET,https://ruleset.skk.moe/List/ip/stream_tw.conf,🇨🇳 Taiwan
RULE-SET,https://ruleset.skk.moe/List/ip/stream.conf,📺 Stream

# > telegram

RULE-SET,https://ruleset.skk.moe/List/ip/telegram.conf,✈️ Telegram
RULE-SET,https://ruleset.skk.moe/List/ip/telegram_asn.conf,✈️ Telegram // 补充
PROCESS-NAME,Telegram,REJECT-DROP


# > LAN
# IP
RULE-SET,https://ruleset.skk.moe/List/ip/lan.conf,DIRECT
# RULE-SET,LAN,DIRECT

# > MISC
IP-CIDR,48.218.168.152/32,DIRECT
RULE-SET,https://ruleset.skk.moe/List/ip/domestic.conf,DIRECT

# > CHNROUTER
RULE-SET,https://ruleset.skk.moe/List/ip/china_ip.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/ip/china_ip_ipv6.conf,DIRECT
# GEOIP,CN,DIRECT

# >  兜底规则
FINAL,🌍 Proxy,dns-failed

[Host]

[URL Rewrite]
# > Redirect Google Search Service
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
# > Redirect Google Maps Service
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302
# > Redirect HTTP to HTTPS
^https?:\/\/(www.)?taobao\.com\/ https://taobao.com/ 302
^https?:\/\/(www.)?jd\.com\/ https://www.jd.com/ 302
^https?:\/\/(www.)?mi\.com\/ https://www.mi.com/ 302
^https?:\/\/you\.163\.com\/ https://you.163.com/ 302
^https?:\/\/(www.)?suning\.com\/ https://suning.com/ 302
^https?:\/\/(www.)?yhd\.com\/ https://yhd.com/ 302
# > AbeamTV header
^https?:\/\/api\.abema\.io\/v\d\/ip\/check - reject
# > CUSTOM URL header

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
hostname = www.google.cn, api.abema.io, *.zhihu.com, -CUSTOMMitM, sub.store